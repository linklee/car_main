<% provide(:title, 'New car') %>

<h1 style="display:none">New car</h1>
<div class=" center  ">

  <%= render 'shared/error_messages_leads' %>

  <%= form_for(@lead,:html => {:class => 'new_form', :onkeypress => "return event.keyCode != 13;"}) do |f| %>
  <div>



    <wizard>contact information</wizard>
    <section>
      <h3>contact information</h3>

      <%= f.text_field :name, placeholder: 'name', required: 'true' %><br/>
      <%= f.text_field :phone, class: 'phone', placeholder: 'phone', required: 'true'  %><br/>
      <%= f.text_field :email, class: 'email', placeholder: 'email', required: 'true'  %>
    </section>
    <wizard>car details</wizard>
    <section>

      <h3>car details</h3>
      <%= f.text_field :car_type, placeholder: 'vehicle type', class: "vehicle_type hidden", required: 'true', value: 'car' %>    
      <div class="btn-group vehicle_group" role="group">
        <button title ="Car" type="button" class="btn btn-primary">   
         <i class="fa fa-car"></i>Car   </button>
         <button type="button" title ="Truck" class="btn btn-primary">
          <i class="fa fa-truck"></i>Truck</button>
          <button type="button" title ="Suv/Van" class="btn btn-primary">
            <i class="fa fa-bus"></i> Suv/Van</button>
            <button type="button" title ="Other" class="btn btn-primary">
             <i class="fa fa-motorcycle"></i> Other</button>

           </div>
           <br/><br/>
              <!---<%= image_tag("car_types/carwhite.png", :class => "car_type", :alt => "car")%>
              <%= image_tag("car_types/truckwhite.png", :class => "car_type", :alt => "truck")%>
              <%= image_tag("car_types/suvvanwhite.png", :class => "car_type", :alt => "van")%>
              <%= image_tag("car_types/otherwhite.png", :class => "car_type", :alt => "otherwhite")%>
              -!-->
              <%= f.text_field :car_manufacturer, placeholder: 'manufacturer', required: 'true'%><br/>
              <%= f.text_field :car_model, placeholder: 'model', required: 'true'%><br/>
              <%= f.text_field :car_year, placeholder: 'year', required: 'true'%>

            </section>
            <!-- coords-->  
            <wizard>Select damaged areas</wizard>

            <section>
             <h3>Select damaged areas</h3>  
             <%= f.text_field :coords, placeholder: 'coords', required: 'true', class: 'coords '%>

             <%= render 'layouts/coords' %>

           </section>

           <!--end coords!-->
           <wizard>Take the first photo from straight on</wizard>
           <section>
             <h3>Take the first photo from straight on</h3>
             <%= image_tag("photo1.jpg", :class => "car_photo")%>
             <br/>
             <center>
               <%= f.file_field :photo1, required: 'true'  %>
             </center>
             <br/>
           </section>
           <wizard>Now take a photo from a side angle</wizard>
           <section>
            <h3>Now take a photo from a side angle</h3>
            <%= image_tag("photo2.jpg", :class => "car_photo")%>
            <center>

              <%= f.file_field :photo2 , required: 'true' %><br/>
            </center>

            <%= f.submit "Finish", class: "new-form-submit btn btn-large btn-primary  email_submit" %>

          </section>

        </div>
        <% end %>

      </div>
      <script>
        $(document).ready(function() {
         // / $('map').imageMapResize(); 
  //          $('.car').width('403px');

  $(".car").click(function(e) {

    var offset = $('.car').offset();
    var relativeX = (e.pageX - offset.left);
    var relativeY = (e.pageY - offset.top);
  //alert(relativeX+':'+relativeY);
  console.log(relativeX+':'+relativeY);
  //$(".position").val("afaf");    
  $("body").append("<img class='check-car' src='<%=asset_path('check.png')=%> ' style= 'color:red;position: absolute;top:"+ (e.pageY-15)  +"px;left: "+ (e.pageX-15)+"px' class=' '></img>");
  var val =$('.coords').val();
  if (val == "") {
    val = $('.car').width();
  }  
  console.log(1231231);
  val+=  '##'+ relativeX+  '---'  + relativeY;
  $('.coords').val(val);
});
});
      </script>
      